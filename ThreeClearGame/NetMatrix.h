/*******************************************************************   
 *  文件名称: NetMatrix.h
 *  简要描述: 用来管理游戏中的网格信息的类
 *   
 *  创建日期: 2017-9-18
 *  作　　者: 王莹
 *  说　　明: 
 *   
 *  修改日期: 
 *  作　　者: 
 *  说　　明: 
 ******************************************************************/  
#pragma once
#include "MyHelper.h"

class NetEvent {
public:
	// 尝试消除
	virtual bool Change(PosPoint pre, PosPoint cur) = 0;
};

class NetMatrix : public NetEvent
{
public:
	NetMatrix();
	virtual ~NetMatrix();

public:
	// 获取内部数据结构
	std::vector<std::vector<Grid>> getNet();

	// 初始化随机阵列
	// 1. 随机排列四种图像按钮
	// 2. 不能有 3 个及其以上个数相连
	void Init();

	// 尝试消除
	bool Change(PosPoint pre, PosPoint cur) override;

protected:
	// 随机产生一个阵列
	void RandomNet(std::vector<std::vector<Grid>>& vecNet);

	// 是否合法阵列
	bool ValidNet(std::vector<std::vector<Grid>> vecNet);

private:
	// 存储矩阵
	std::vector<std::vector<Grid>> m_vecNet;
	// 事件指针
	NetEvent* m_event;
};